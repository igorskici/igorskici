{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Udemy\\\\ReactApp\\\\client\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import axios from'axios';import{setAlert}from'./alert';import{GET_PROFILE,PROFILE_ERROR,UPDATE_PROFILE,CLEAR_PROFILE,DELETE_ACCOUNT,GET_PROFILES,GET_REPOS}from'./types';//GET current profile\nexport var getCurrentProfile=function getCurrentProfile(){return function _callee(dispatch){var res;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(axios.get('/api/profile/me'));case 3:res=_context.sent;console.log(\"call profile/me response\"+JSON.stringify(res));dispatch({type:GET_PROFILE,payload:res.data});_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(\"ERROR WHILE GETTING PROFILE\"+_context.t0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Profile allready exist\",status:_context.t0.response.status}});case 12:case\"end\":return _context.stop();}}},null,null,[[0,8]]);};};//GET ALL PROFILES\nexport var getProfiles=function getProfiles(){return function _callee2(dispatch){var res;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:dispatch({type:CLEAR_PROFILE});_context2.prev=1;_context2.next=4;return _regeneratorRuntime.awrap(axios.get('/api/profile'));case 4:res=_context2.sent;console.log(\"call profile/me response\"+JSON.stringify(res));dispatch({type:GET_PROFILES,payload:res.data});_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);console.log(\"ERROR WHILE GETTING PROFILE\"+_context2.t0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Profile allready exist\",status:_context2.t0.response.status}});case 13:case\"end\":return _context2.stop();}}},null,null,[[1,9]]);};};//GET PROFILE BY ID\nexport var getProfilesById=function getProfilesById(userId){return function _callee3(dispatch){var res;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return _regeneratorRuntime.awrap(axios.get(\"/api/profile/user/\".concat(userId)));case 3:res=_context3.sent;console.log(\"call profileByID response\"+JSON.stringify(res));dispatch({type:GET_PROFILE,payload:res.data});_context3.next=12;break;case 8:_context3.prev=8;_context3.t0=_context3[\"catch\"](0);console.log(\"ERROR WHILE GETTING PROFILE\"+_context3.t0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Profile allready exist\",status:_context3.t0.response.status}});case 12:case\"end\":return _context3.stop();}}},null,null,[[0,8]]);};};//GET PROFILE BY ID\nexport var getGitHubRepos=function getGitHubRepos(username){return function _callee4(dispatch){var res;return _regeneratorRuntime.async(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return _regeneratorRuntime.awrap(axios.get(\"/api/profile/github/\".concat(username)));case 3:res=_context4.sent;console.log(\"call profile/me response\"+JSON.stringify(res));dispatch({type:GET_REPOS,payload:res.data});_context4.next=12;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);console.log(\"ERROR WHILE GETTING PROFILE\"+_context4.t0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Profile allready exist\",status:_context4.t0.response.status}});case 12:case\"end\":return _context4.stop();}}},null,null,[[0,8]]);};};//Create profile\nexport var createProfile=function createProfile(formData,history){var edit=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;return function _callee5(dispatch){var config,res,errors;return _regeneratorRuntime.async(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;config={headers:{'Content-Type':'application/json'}};console.log(\"call create-profile\");_context5.next=5;return _regeneratorRuntime.awrap(axios.post('/api/profile',formData,config));case 5:res=_context5.sent;dispatch({type:GET_PROFILE,payload:res.data});dispatch(setAlert(edit?'profile updated':'profile created','success'));if(!edit){history.push('/dashboard');}_context5.next=17;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](0);errors=_context5.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}console.log(_context5.t0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Profile allready exist\",status:_context5.t0.response.status}});case 17:case\"end\":return _context5.stop();}}},null,null,[[0,11]]);};};//Add education\nexport var addEducation=function addEducation(formData,history){return function _callee6(dispatch){var config,res,errors;return _regeneratorRuntime.async(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.prev=0;config={headers:{'Content-Type':'application/json'}};console.log(\"call create-profile\");_context6.next=5;return _regeneratorRuntime.awrap(axios.put('/api/profile/education',formData,config));case 5:res=_context6.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Education added','success'));history.push('/dashboard');_context6.next=17;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](0);errors=_context6.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}console.log(_context6.t0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Profile allready exist\",status:_context6.t0.response.status}});case 17:case\"end\":return _context6.stop();}}},null,null,[[0,11]]);};};//Add expiriance\nexport var addExperiences=function addExperiences(formData,history){return function _callee7(dispatch){var config,res,errors;return _regeneratorRuntime.async(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.prev=0;config={headers:{'Content-Type':'application/json'}};console.log(\"call create-profile\");_context7.next=5;return _regeneratorRuntime.awrap(axios.put('/api/profile/expiriance',formData,config));case 5:res=_context7.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Experiance added','success'));history.push('/dashboard');_context7.next=17;break;case 11:_context7.prev=11;_context7.t0=_context7[\"catch\"](0);errors=_context7.t0.response.data.errors;if(errors){errors.forEach(function(error){return dispatch(setAlert(error.msg,'danger'));});}console.log(_context7.t0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Profile allready exist\",status:_context7.t0.response.status}});case 17:case\"end\":return _context7.stop();}}},null,null,[[0,11]]);};};//Delete experiance\nexport var deleteExperiance=function deleteExperiance(id){return function _callee8(dispatch){var res;return _regeneratorRuntime.async(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.prev=0;_context8.next=3;return _regeneratorRuntime.awrap(axios.delete(\"/api/profile/expiriance/\".concat(id)));case 3:res=_context8.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Experiance removed','success'));_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Profile allready exist\",status:_context8.t0.response.status}});case 11:case\"end\":return _context8.stop();}}},null,null,[[0,8]]);};};export var deleteEducation=function deleteEducation(id){return function _callee9(dispatch){var res;return _regeneratorRuntime.async(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.prev=0;_context9.next=3;return _regeneratorRuntime.awrap(axios.delete(\"/api/profile/education/\".concat(id)));case 3:res=_context9.sent;dispatch({type:UPDATE_PROFILE,payload:res.data});dispatch(setAlert('Education removed','success'));_context9.next=11;break;case 8:_context9.prev=8;_context9.t0=_context9[\"catch\"](0);dispatch({type:PROFILE_ERROR,payload:{msg:\"Education allready exist\",status:_context9.t0.response.status}});case 11:case\"end\":return _context9.stop();}}},null,null,[[0,8]]);};};//delete account & profile\nexport var deleteAccount=function deleteAccount(id){return function _callee10(dispatch){return _regeneratorRuntime.async(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:if(!window.confirm(\"Are you sure?\")){_context10.next=12;break;}_context10.prev=1;_context10.next=4;return _regeneratorRuntime.awrap(axios.delete(\"/api/profile\"));case 4:dispatch({type:CLEAR_PROFILE});dispatch({type:DELETE_ACCOUNT});dispatch(setAlert(\"Your account has been deleted\",\"success\"));_context10.next=12;break;case 9:_context10.prev=9;_context10.t0=_context10[\"catch\"](1);dispatch({type:PROFILE_ERROR,payload:{msg:\"Cannot be deleted\",status:_context10.t0.response.status}});case 12:case\"end\":return _context10.stop();}}},null,null,[[1,9]]);};};","map":{"version":3,"sources":["D:/Udemy/ReactApp/client/src/actions/profile.js"],"names":["axios","setAlert","GET_PROFILE","PROFILE_ERROR","UPDATE_PROFILE","CLEAR_PROFILE","DELETE_ACCOUNT","GET_PROFILES","GET_REPOS","getCurrentProfile","dispatch","get","res","console","log","JSON","stringify","type","payload","data","msg","status","response","getProfiles","getProfilesById","userId","getGitHubRepos","username","createProfile","formData","history","edit","config","headers","post","push","errors","forEach","error","addEducation","put","addExperiences","deleteExperiance","id","delete","deleteEducation","deleteAccount","window","confirm"],"mappings":"wGAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,QAAR,KAAuB,SAAvB,CACA,OACIC,WADJ,CAEIC,aAFJ,CAGIC,cAHJ,CAIIC,aAJJ,CAKIC,cALJ,CAMIC,YANJ,CAOIC,SAPJ,KAQO,SARP,CAUA;AACA,MAAO,IAAMC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,SAAM,kBAAMC,QAAN,4LAEbV,KAAK,CAACW,GAAN,CAAU,iBAAV,CAFa,SAEzBC,GAFyB,eAG/BC,OAAO,CAACC,GAAR,CAAY,2BAA6BC,IAAI,CAACC,SAAL,CAAeJ,GAAf,CAAzC,EAEAF,QAAQ,CAAC,CACLO,IAAI,CAAEf,WADD,CAELgB,OAAO,CAAEN,GAAG,CAACO,IAFR,CAAD,CAAR,CAL+B,+EAY/BN,OAAO,CAACC,GAAR,CAAY,yCAAZ,EAEAJ,QAAQ,CAAC,CACLO,IAAI,CAAEd,aADD,CAELe,OAAO,CAAE,CAACE,GAAG,CAAE,wBAAN,CAAgCC,MAAM,CAAE,YAAIC,QAAJ,CAAaD,MAArD,CAFJ,CAAD,CAAR,CAd+B,iEAAN,EAA1B,CAqBP;AACA,MAAO,IAAME,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAM,mBAAMb,QAAN,+HAE/BA,QAAQ,CAAC,CAACO,IAAI,CAAEZ,aAAP,CAAD,CAAR,CAF+B,mEAKTL,KAAK,CAACW,GAAN,CAAU,cAAV,CALS,SAKrBC,GALqB,gBAM3BC,OAAO,CAACC,GAAR,CAAY,2BAA6BC,IAAI,CAACC,SAAL,CAAeJ,GAAf,CAAzC,EAEAF,QAAQ,CAAC,CACLO,IAAI,CAAEV,YADD,CAELW,OAAO,CAAEN,GAAG,CAACO,IAFR,CAAD,CAAR,CAR2B,mFAgB3BN,OAAO,CAACC,GAAR,CAAY,0CAAZ,EAEAJ,QAAQ,CAAC,CACLO,IAAI,CAAEd,aADD,CAELe,OAAO,CAAE,CAACE,GAAG,CAAE,wBAAN,CAAgCC,MAAM,CAAE,aAAIC,QAAJ,CAAaD,MAArD,CAFJ,CAAD,CAAR,CAlB2B,kEAAN,EAApB,CAyBP;AACA,MAAO,IAAMG,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAC,MAAM,QAAI,mBAAMf,QAAN,kMAGjBV,KAAK,CAACW,GAAN,6BAA+Bc,MAA/B,EAHiB,SAG7Bb,GAH6B,gBAInCC,OAAO,CAACC,GAAR,CAAY,4BAA8BC,IAAI,CAACC,SAAL,CAAeJ,GAAf,CAA1C,EAEAF,QAAQ,CAAC,CACLO,IAAI,CAAEf,WADD,CAELgB,OAAO,CAAEN,GAAG,CAACO,IAFR,CAAD,CAAR,CANmC,mFAcnCN,OAAO,CAACC,GAAR,CAAY,0CAAZ,EAEAJ,QAAQ,CAAC,CACLO,IAAI,CAAEd,aADD,CAELe,OAAO,CAAE,CAACE,GAAG,CAAE,wBAAN,CAAgCC,MAAM,CAAE,aAAIC,QAAJ,CAAaD,MAArD,CAFJ,CAAD,CAAR,CAhBmC,kEAAJ,EAA9B,CAyBP;AACA,MAAO,IAAMK,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAC,QAAQ,QAAI,mBAAMjB,QAAN,kMAGlBV,KAAK,CAACW,GAAN,+BAAiCgB,QAAjC,EAHkB,SAG9Bf,GAH8B,gBAIpCC,OAAO,CAACC,GAAR,CAAY,2BAA6BC,IAAI,CAACC,SAAL,CAAeJ,GAAf,CAAzC,EAEAF,QAAQ,CAAC,CACLO,IAAI,CAAET,SADD,CAELU,OAAO,CAAEN,GAAG,CAACO,IAFR,CAAD,CAAR,CANoC,mFAcpCN,OAAO,CAACC,GAAR,CAAY,0CAAZ,EAEAJ,QAAQ,CAAC,CACLO,IAAI,CAAEd,aADD,CAELe,OAAO,CAAE,CAACE,GAAG,CAAE,wBAAN,CAAgCC,MAAM,CAAE,aAAIC,QAAJ,CAAaD,MAArD,CAFJ,CAAD,CAAR,CAhBoC,kEAAJ,EAA/B,CAwBP;AACA,MAAO,IAAMO,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,QAAD,CAAWC,OAAX,KAAoBC,CAAAA,IAApB,2DAAyB,KAAzB,OAAmC,mBAAMrB,QAAN,8JAGlDsB,MAHkD,CAGzC,CACXC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CADG,CAHyC,CASxDpB,OAAO,CAACC,GAAR,CAAY,qBAAZ,EATwD,kDAUtCd,KAAK,CAACkC,IAAN,CAAW,cAAX,CAA2BL,QAA3B,CAAqCG,MAArC,CAVsC,SAUlDpB,GAVkD,gBAaxDF,QAAQ,CAAC,CACLO,IAAI,CAAEf,WADD,CAELgB,OAAO,CAAEN,GAAG,CAACO,IAFR,CAAD,CAAR,CAKAT,QAAQ,CAACT,QAAQ,CAAC8B,IAAI,CAAG,iBAAH,CAAuB,iBAA5B,CAA+C,SAA/C,CAAT,CAAR,CAEA,GAAG,CAACA,IAAJ,CAAS,CACLD,OAAO,CAACK,IAAR,CAAa,YAAb,EACH,CAtBuD,qFA0BlDC,MA1BkD,CA0B1C,aAAId,QAAJ,CAAaH,IAAb,CAAkBiB,MA1BwB,CA4BxD,GAAGA,MAAH,CAAU,CACNA,MAAM,CAACC,OAAP,CAAe,SAAAC,KAAK,QAAI5B,CAAAA,QAAQ,CAACT,QAAQ,CAACqC,KAAK,CAAClB,GAAP,CAAY,QAAZ,CAAT,CAAZ,EAApB,EACH,CAEDP,OAAO,CAACC,GAAR,eAEAJ,QAAQ,CAAC,CACLO,IAAI,CAAEd,aADD,CAELe,OAAO,CAAE,CAACE,GAAG,CAAE,wBAAN,CAAgCC,MAAM,CAAE,aAAIC,QAAJ,CAAaD,MAArD,CAFJ,CAAD,CAAR,CAlCwD,mEAAnC,EAAtB,CA2CP;AACA,MAAO,IAAMkB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACV,QAAD,CAAWC,OAAX,QAAuB,mBAAMpB,QAAN,8JAGrCsB,MAHqC,CAG5B,CACXC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CADG,CAH4B,CAS3CpB,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAT2C,kDAUzBd,KAAK,CAACwC,GAAN,CAAU,wBAAV,CAAoCX,QAApC,CAA8CG,MAA9C,CAVyB,SAUrCpB,GAVqC,gBAY3CF,QAAQ,CAAC,CACLO,IAAI,CAAEb,cADD,CAELc,OAAO,CAAEN,GAAG,CAACO,IAFR,CAAD,CAAR,CAKCT,QAAQ,CAACT,QAAQ,CAAC,iBAAD,CAAoB,SAApB,CAAT,CAAR,CAGD6B,OAAO,CAACK,IAAR,CAAa,YAAb,EApB2C,qFAyBrCC,MAzBqC,CAyB7B,aAAId,QAAJ,CAAaH,IAAb,CAAkBiB,MAzBW,CA2B3C,GAAGA,MAAH,CAAU,CACNA,MAAM,CAACC,OAAP,CAAe,SAAAC,KAAK,QAAI5B,CAAAA,QAAQ,CAACT,QAAQ,CAACqC,KAAK,CAAClB,GAAP,CAAY,QAAZ,CAAT,CAAZ,EAApB,EACH,CAEDP,OAAO,CAACC,GAAR,eAEAJ,QAAQ,CAAC,CACLO,IAAI,CAAEd,aADD,CAELe,OAAO,CAAE,CAACE,GAAG,CAAE,wBAAN,CAAgCC,MAAM,CAAE,aAAIC,QAAJ,CAAaD,MAArD,CAFJ,CAAD,CAAR,CAjC2C,mEAAvB,EAArB,CA4CP;AACA,MAAO,IAAMoB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACZ,QAAD,CAAWC,OAAX,QAAuB,mBAAMpB,QAAN,8JAGvCsB,MAHuC,CAG9B,CACXC,OAAO,CAAC,CACJ,eAAgB,kBADZ,CADG,CAH8B,CAS7CpB,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAT6C,kDAU3Bd,KAAK,CAACwC,GAAN,CAAU,yBAAV,CAAqCX,QAArC,CAA+CG,MAA/C,CAV2B,SAUvCpB,GAVuC,gBAY7CF,QAAQ,CAAC,CACLO,IAAI,CAAEb,cADD,CAELc,OAAO,CAAEN,GAAG,CAACO,IAFR,CAAD,CAAR,CAKAT,QAAQ,CAACT,QAAQ,CAAC,kBAAD,CAAqB,SAArB,CAAT,CAAR,CAGI6B,OAAO,CAACK,IAAR,CAAa,YAAb,EApByC,qFAyBvCC,MAzBuC,CAyB/B,aAAId,QAAJ,CAAaH,IAAb,CAAkBiB,MAzBa,CA2B7C,GAAGA,MAAH,CAAU,CACNA,MAAM,CAACC,OAAP,CAAe,SAAAC,KAAK,QAAI5B,CAAAA,QAAQ,CAACT,QAAQ,CAACqC,KAAK,CAAClB,GAAP,CAAY,QAAZ,CAAT,CAAZ,EAApB,EACH,CAEDP,OAAO,CAACC,GAAR,eAEAJ,QAAQ,CAAC,CACLO,IAAI,CAAEd,aADD,CAELe,OAAO,CAAE,CAACE,GAAG,CAAE,wBAAN,CAAgCC,MAAM,CAAE,aAAIC,QAAJ,CAAaD,MAArD,CAFJ,CAAD,CAAR,CAjC6C,mEAAvB,EAAvB,CA0CP;AAEA,MAAO,IAAMqB,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAAC,EAAE,QAAI,mBAAMjC,QAAN,kMAEhBV,KAAK,CAAC4C,MAAN,mCAAwCD,EAAxC,EAFgB,SAE5B/B,GAF4B,gBAIlCF,QAAQ,CAAC,CACPO,IAAI,CAAEb,cADC,CAEPc,OAAO,CAAEN,GAAG,CAACO,IAFN,CAAD,CAAR,CAKAT,QAAQ,CAACT,QAAQ,CAAC,oBAAD,CAAuB,SAAvB,CAAT,CAAR,CATkC,mFAWlCS,QAAQ,CAAC,CACPO,IAAI,CAAEd,aADC,CAEPe,OAAO,CAAE,CAAEE,GAAG,CAAE,wBAAP,CAAiCC,MAAM,CAAE,aAAIC,QAAJ,CAAaD,MAAtD,CAFF,CAAD,CAAR,CAXkC,kEAAJ,EAA3B,CAmBP,MAAO,IAAMwB,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAAF,EAAE,QAAI,mBAAMjC,QAAN,kMAEbV,KAAK,CAAC4C,MAAN,kCAAuCD,EAAvC,EAFa,SAEzB/B,GAFyB,gBAI/BF,QAAQ,CAAC,CACPO,IAAI,CAAEb,cADC,CAEPc,OAAO,CAAEN,GAAG,CAACO,IAFN,CAAD,CAAR,CAKAT,QAAQ,CAACT,QAAQ,CAAC,mBAAD,CAAsB,SAAtB,CAAT,CAAR,CAT+B,mFAW/BS,QAAQ,CAAC,CACPO,IAAI,CAAEd,aADC,CAEPe,OAAO,CAAE,CAAEE,GAAG,CAAE,0BAAP,CAAmCC,MAAM,CAAE,aAAIC,QAAJ,CAAaD,MAAxD,CAFF,CAAD,CAAR,CAX+B,kEAAJ,EAA1B,CAmBP;AACE,MAAO,IAAMyB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAH,EAAE,QAAI,oBAAMjC,QAAN,+HAC7BqC,MAAM,CAACC,OAAP,CAAe,eAAf,CAD6B,iGAGvBhD,KAAK,CAAC4C,MAAN,gBAHuB,SAK7BlC,QAAQ,CAAC,CACPO,IAAI,CAAEZ,aADC,CAAD,CAAR,CAGAK,QAAQ,CAAC,CACLO,IAAI,CAAEX,cADD,CAAD,CAAR,CAIAI,QAAQ,CAACT,QAAQ,CAAC,+BAAD,CAAkC,SAAlC,CAAT,CAAR,CAZ6B,uFAe7BS,QAAQ,CAAC,CACPO,IAAI,CAAEd,aADC,CAEPe,OAAO,CAAE,CACPE,GAAG,CAAE,mBADE,CAEPC,MAAM,CAAE,cAAIC,QAAJ,CAAaD,MAFd,CAFF,CAAD,CAAR,CAf6B,mEAAJ,EAAxB","sourcesContent":["import axios from 'axios';\r\nimport {setAlert} from './alert';\r\nimport {\r\n    GET_PROFILE,\r\n    PROFILE_ERROR,\r\n    UPDATE_PROFILE,\r\n    CLEAR_PROFILE,\r\n    DELETE_ACCOUNT,\r\n    GET_PROFILES,\r\n    GET_REPOS\r\n} from './types';\r\n\r\n//GET current profile\r\nexport const getCurrentProfile = () => async dispatch => {\r\n    try {   \r\n        const res = await axios.get('/api/profile/me');\r\n        console.log(\"call profile/me response\" + JSON.stringify(res));\r\n\r\n        dispatch({\r\n            type: GET_PROFILE,\r\n            payload: res.data\r\n        });\r\n\r\n    } catch (err) {\r\n\r\n        console.log(\"ERROR WHILE GETTING PROFILE\" + err)\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg: \"Profile allready exist\", status: err.response.status}\r\n        })\r\n    }\r\n}\r\n\r\n//GET ALL PROFILES\r\nexport const getProfiles = () => async dispatch => {\r\n\r\n  dispatch({type: CLEAR_PROFILE});\r\n\r\n  try {   \r\n      const res = await axios.get('/api/profile');\r\n      console.log(\"call profile/me response\" + JSON.stringify(res));\r\n\r\n      dispatch({\r\n          type: GET_PROFILES,\r\n          payload: res.data\r\n      });\r\n\r\n\r\n  } catch (err) {\r\n\r\n      console.log(\"ERROR WHILE GETTING PROFILE\" + err)\r\n\r\n      dispatch({\r\n          type: PROFILE_ERROR,\r\n          payload: {msg: \"Profile allready exist\", status: err.response.status}\r\n      })\r\n  }\r\n}\r\n\r\n//GET PROFILE BY ID\r\nexport const getProfilesById = userId => async dispatch => {\r\n\r\n  try {   \r\n      const res = await axios.get(`/api/profile/user/${userId}`);\r\n      console.log(\"call profileByID response\" + JSON.stringify(res));\r\n\r\n      dispatch({\r\n          type: GET_PROFILE,\r\n          payload: res.data\r\n      });\r\n\r\n\r\n  } catch (err) {\r\n\r\n      console.log(\"ERROR WHILE GETTING PROFILE\" + err)\r\n\r\n      dispatch({\r\n          type: PROFILE_ERROR,\r\n          payload: {msg: \"Profile allready exist\", status: err.response.status}\r\n      })\r\n  }\r\n}\r\n\r\n\r\n\r\n//GET PROFILE BY ID\r\nexport const getGitHubRepos = username => async dispatch => {\r\n\r\n  try {   \r\n      const res = await axios.get(`/api/profile/github/${username}`);\r\n      console.log(\"call profile/me response\" + JSON.stringify(res));\r\n\r\n      dispatch({\r\n          type: GET_REPOS,\r\n          payload: res.data\r\n      });\r\n\r\n\r\n  } catch (err) {\r\n\r\n      console.log(\"ERROR WHILE GETTING PROFILE\" + err)\r\n\r\n      dispatch({\r\n          type: PROFILE_ERROR,\r\n          payload: {msg: \"Profile allready exist\", status: err.response.status}\r\n      })\r\n  }\r\n}\r\n\r\n\r\n//Create profile\r\nexport const createProfile = (formData, history, edit=false) => async dispatch => {\r\n    try {\r\n\r\n        const config = {\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        console.log(\"call create-profile\");\r\n        const res = await axios.post('/api/profile', formData, config);\r\n\r\n        \r\n        dispatch({\r\n            type: GET_PROFILE,\r\n            payload: res.data\r\n        });\r\n\r\n        dispatch(setAlert(edit ? 'profile updated' : 'profile created', 'success'));\r\n\r\n        if(!edit){\r\n            history.push('/dashboard');\r\n        }\r\n\r\n    } catch (err) {\r\n\r\n        const errors =err.response.data.errors;\r\n\r\n        if(errors){\r\n            errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\r\n        }\r\n\r\n        console.log(err)\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg: \"Profile allready exist\", status: err.response.status}\r\n        });\r\n\r\n    }\r\n}\r\n\r\n\r\n//Add education\r\nexport const addEducation = (formData, history) => async dispatch => {\r\n    try {\r\n\r\n        const config = {\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        console.log(\"call create-profile\");\r\n        const res = await axios.put('/api/profile/education', formData, config);\r\n        \r\n        dispatch({\r\n            type: UPDATE_PROFILE,\r\n            payload: res.data\r\n        });\r\n\r\n         dispatch(setAlert('Education added', 'success'));\r\n\r\n      \r\n        history.push('/dashboard');\r\n      \r\n\r\n    } catch (err) {\r\n\r\n        const errors =err.response.data.errors;\r\n\r\n        if(errors){\r\n            errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\r\n        }\r\n\r\n        console.log(err)\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg: \"Profile allready exist\", status: err.response.status}\r\n        });\r\n\r\n        \r\n    }\r\n}\r\n\r\n\r\n\r\n//Add expiriance\r\nexport const addExperiences = (formData, history) => async dispatch => {\r\n    try {\r\n\r\n        const config = {\r\n            headers:{\r\n                'Content-Type': 'application/json'\r\n            }\r\n        }\r\n\r\n        console.log(\"call create-profile\");\r\n        const res = await axios.put('/api/profile/expiriance', formData, config);\r\n\r\n        dispatch({\r\n            type: UPDATE_PROFILE,\r\n            payload: res.data\r\n        });\r\n\r\n        dispatch(setAlert('Experiance added', 'success'));\r\n\r\n      \r\n            history.push('/dashboard');\r\n      \r\n\r\n    } catch (err) {\r\n\r\n        const errors =err.response.data.errors;\r\n\r\n        if(errors){\r\n            errors.forEach(error => dispatch(setAlert(error.msg, 'danger')));\r\n        }\r\n\r\n        console.log(err)\r\n\r\n        dispatch({\r\n            type: PROFILE_ERROR,\r\n            payload: {msg: \"Profile allready exist\", status: err.response.status}\r\n        });\r\n\r\n        \r\n    }\r\n}\r\n\r\n//Delete experiance\r\n\r\nexport const deleteExperiance = id => async dispatch => {\r\n  try {\r\n    const res = await axios.delete(`/api/profile/expiriance/${id}`);\r\n\r\n    dispatch({\r\n      type: UPDATE_PROFILE,\r\n      payload: res.data\r\n    });\r\n\r\n    dispatch(setAlert('Experiance removed', 'success'));\r\n  } catch (err) {\r\n    dispatch({\r\n      type: PROFILE_ERROR,\r\n      payload: { msg: \"Profile allready exist\", status: err.response.status }\r\n    });\r\n  }\r\n};\r\n\r\n\r\nexport const deleteEducation = id => async dispatch => {\r\n    try {\r\n      const res = await axios.delete(`/api/profile/education/${id}`);\r\n  \r\n      dispatch({\r\n        type: UPDATE_PROFILE,\r\n        payload: res.data\r\n      });\r\n  \r\n      dispatch(setAlert('Education removed', 'success'));\r\n    } catch (err) {\r\n      dispatch({\r\n        type: PROFILE_ERROR,\r\n        payload: { msg: \"Education allready exist\", status: err.response.status }\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n//delete account & profile\r\n  export const deleteAccount = id => async dispatch => {\r\n    if (window.confirm(\"Are you sure?\")) {\r\n      try {\r\n        await axios.delete(`/api/profile`);\r\n\r\n        dispatch({\r\n          type: CLEAR_PROFILE\r\n        });\r\n        dispatch({\r\n            type: DELETE_ACCOUNT\r\n        });\r\n\r\n        dispatch(setAlert(\"Your account has been deleted\", \"success\"));\r\n\r\n      } catch (err) {\r\n        dispatch({\r\n          type: PROFILE_ERROR,\r\n          payload: {\r\n            msg: \"Cannot be deleted\",\r\n            status: err.response.status\r\n          }\r\n        });\r\n      }\r\n    }\r\n  };"]},"metadata":{},"sourceType":"module"}